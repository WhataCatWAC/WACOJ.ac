<form method="get" id="searchForm" action="{{ url('problem_main') }}">
  <div class="search-container">
    <div class="search-container--header">
      <div class="title">{{ _('SearchProblem') }}:</div>
      <div class="search">
        <div class="search--bar">
          <div>
            <span class="icon icon-search"></span>
          </div>          
          <input name="q" type="text" value="{{ qs }}" placeholder="{{ _('SearchHint') }}">
        </div>
        <button type="submit">
          <span>{{ _('Search') }}</span>
        </button>
      </div>
    </div>
    <div class="search-container--body">
      {# {% if domain.pinnedFilter %} #}
      {# {% set pinnedFilter = domain.pinnedFilter|parseYaml %} #}
      {% if true %}
      {% set pinnedFilter = {
            "difficulty": ['入门', 'CSP-J(-)', 'CSP-J', 'CSP-J(+)', 'CSP-S(-)', 'CSP-S', 'CSP-S(+)', 'NOIP', '省选', 'NOI', 'IOI'],
            "type": ['编程题', '选择题', '判断题', '填空题', '材料题']
        } 
      %}
      <section>
        <h2 class="title text--align-vertical">
          {{ _('ProblemType') }}:
        </h2>
        <div class="list flex-wrap" data-type-container>
          {%- for type in pinnedFilter.type -%}
          <div class="list__item text--align-vertical" data-selection="{{type}}">
            {{ type }}
          </div>
          {%- endfor -%}          
        </div>
      </section>
      <section>
        <h2 class="title text--align-vertical">
          {{ _('ProblemDifficulty') }}:
        </h2>
        <div class="list flex-wrap" data-difficulty-container>
          {%- for difficulty in pinnedFilter.difficulty -%}
          <div class="list__item text--align-vertical" data-selection="{{difficulty}}">
            {{ difficulty }}
          </div>
          {%- endfor -%}          
        </div>                
      </section>
      {% endif %}       
      <section style="margin-bottom: 36px">
        <h2 class="title text--align-vertical">
          {{ _('ProblemTag') }}:
        </h2>
        <div class="tag-container">
          <div class="list flex-wrap">
            <div class="list__item text--align-vertical dialog-button" data-problem-tag-dialog-button>
              {{ _('SelectTags') }}
            </div>   
          </div>     
          <div class="tag-container--selected" data-problem-tag-selected-container-outer>
            {%- for problemTagCategory in Object.keys((model.system.get('problem.descriptors')|parseYaml)["标签类型"]) -%}
              {%- for problemTag in (model.system.get('problem.descriptors')|parseYaml)["标签类型"][problemTagCategory] -%}
              <div class="item hide selected" data-problem-tag-category-outer="{{problemTagCategory}}" data-problem-tag-selected-outer="{{problemTag}}">
                {{ problemTag }}
                <span class="icon icon-close"></span>
              </div>
              {%- endfor -%}       
            {%- endfor -%}
          </div>                
        </div>               
      </section>
      {% include "partials/problem_stat.html" %}
    </div>
  </div>
</form>
{% include "partials/problem_category_dialog.html" %}